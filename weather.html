<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Weather App</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-size: cover;
    background-position: center;
    color: rgb(33, 8, 82);
    text-align: center;
    padding: 20px;
    transition: background 0.5s ease;
  }
  h1 {
    margin-top: 10px;
  }
  input {
    padding: 8px;
    font-size: 16px;
    border-radius: 4px;
    border: none;
  }
  button {
    padding: 8px 14px;
    font-size: 16px;
    border: none;
    border-radius: 4px;
    background-color: #a5e6fa;
    color: rgb(35, 11, 11);
    cursor: pointer;
    margin: 5px;
  }
  button:hover {
    background-color: #e68900;
  }
  .weather-info {
    margin-top: 20px;
    background: rgba(0,0,0,0.3);
    padding: 15px;
    border-radius: 8px;
    display: inline-block;
    min-width: 250px;
  }
  .forecast {
    display: flex;
    justify-content: center;
    margin-top: 20px;
    gap: 15px;
    flex-wrap: wrap;
  }
  .forecast-day {
    background: rgba(0,0,0,0.3);
    padding: 10px;
    border-radius: 8px;
    text-align: center;
    width: 100px;
  }
</style>
</head>
<body>

<h1>Weather App</h1>
<p>Enter a city name or use your current location</p>
<input type="text" id="cityInput" placeholder="Enter city" />
<button onclick="getWeatherByCity()">Search</button>
<button onclick="getWeatherByLocation()">üìç Use My Location</button>

<div class="weather-info" id="weather"></div>
<div class="forecast" id="forecast"></div>

<script>
const apiKey = "YOUR_API_KEY";

function getWeatherByCity() {
  const city = document.getElementById("cityInput").value;
  if (!city) {
    alert("Please enter a city name");
    return;
  }
  fetchWeather(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`);
  fetchForecast(`https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`);
}

function getWeatherByLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      position => {
        const { latitude, longitude } = position.coords;
        fetchWeather(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${apiKey}&units=metric`);
        fetchForecast(`https://api.openweathermap.org/data/2.5/forecast?lat=${latitude}&lon=${longitude}&appid=${apiKey}&units=metric`);
      },
      error => {
        alert("Unable to get location");
      }
    );
  } else {
    alert("Geolocation is not supported by your browser");
  }
}

function fetchWeather(url) {
  fetch(url)
    .then(res => res.json())
    .then(data => {
      if (data.cod != 200) {
        document.getElementById("weather").innerHTML = `<p>${data.message}</p>`;
        return;
      }
      const icon = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
      document.getElementById("weather").innerHTML = `
        <h2>${data.name}, ${data.sys.country}</h2>
        <img src="${icon}" alt="Weather icon">
        <p>üå° ${data.main.temp}¬∞C</p>
        <p>‚òÅ ${data.weather[0].description}</p>
        <p>üí® ${data.wind.speed} m/s</p>
        <p>üíß ${data.main.humidity}%</p>
      `;
      changeBackground(data.weather[0].main);
    })
    .catch(() => {
      document.getElementById("weather").innerHTML = `<p>Error fetching weather data</p>`;
    });
}

function fetchForecast(url) {
  fetch(url)
    .then(res => res.json())
    .then(data => {
      const forecastContainer = document.getElementById("forecast");
      forecastContainer.innerHTML = "";
      const daily = data.list.filter(item => item.dt_txt.includes("12:00:00"));
      daily.forEach(day => {
        const date = new Date(day.dt_txt).toLocaleDateString("en-US", { weekday: "short" });
        const icon = `https://openweathermap.org/img/wn/${day.weather[0].icon}.png`;
        forecastContainer.innerHTML += `
          <div class="forecast-day">
            <h4>${date}</h4>
            <img src="${icon}" alt="Weather icon">
            <p>${day.main.temp}¬∞C</p>
          </div>
        `;
      });
    });
}

function changeBackground(condition) {
  const backgrounds = {
    Clear: "url('https://images.unsplash.com/photo-1501973801540-537f08ccae7b?auto=format&fit=crop&w=1400&q=80')",
    Clouds: "url('https://images.unsplash.com/photo-1499346030926-9a72daac6c63?auto=format&fit=crop&w=1400&q=80')",
    Rain: "url('https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=1400&q=80')",
    Snow: "url('https://images.unsplash.com/photo-1608889175922-2a3a3e4cc621?auto=format&fit=crop&w=1400&q=80')",
    Thunderstorm: "url('https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=1400&q=80')",
    Drizzle: "url('https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=1400&q=80')",
    Mist: "url('https://images.unsplash.com/photo-1501973801540-537f08ccae7b?auto=format&fit=crop&w=1400&q=80')"
  };
  document.body.style.backgroundImage = backgrounds[condition] || backgrounds["Clear"];
}
</script>

</body>
</html>
